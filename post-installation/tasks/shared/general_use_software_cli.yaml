---
# Cross-platform packages available on both Debian and Homebrew
- name: Set cross-platform package list
  ansible.builtin.set_fact:
    cross_platform_packages:
      - httpie
      - ncdu
      - peco
      - thefuck
      - unzip

- name: Install apt apps (Linux only)
  ansible.builtin.apt:
    name: "{{ cross_platform_packages + ['tlp'] }}"
  when: ansible_os_family == 'Debian'

- name: Install macOS equivalents via Homebrew
  community.general.homebrew:
    name: "{{ cross_platform_packages }}"
    state: present
    path: "{{ homebrew_path }}"
  retries: 3
  become: false
  when: ansible_os_family == 'Darwin'

- name: Install homebrew packages with ansible community module
  community.general.homebrew:
    name:
      - fzf
      - eza
      - lsd
      - helix
    state: present
    path: "{{ homebrew_path }}"
  retries: 3
  become: false
